import{d as B,r as u,q as _,B as z,c as b,e as s,t as h,z as v,A,x as i,s as U,D as k,k as V,E as D,b as g}from"./vendor-BIB9HGHL.js";const K={class:"space-y-6"},T={class:"grid md:grid-cols-2 gap-6"},L={class:"space-y-4"},R={class:"flex items-center justify-between"},E={class:"flex gap-2"},I=["disabled"],q={key:0,class:"p-3 bg-destructive/10 border border-destructive/20 rounded-md"},F={class:"text-sm text-destructive mt-1"},G={class:"space-y-4"},H={class:"flex items-center justify-between"},P={class:"flex gap-2"},Q=["disabled"],W=["disabled"],X={class:"relative"},Y={class:"card p-4"},Z={class:"grid md:grid-cols-3 gap-4"},$={class:"space-y-2"},j={class:"space-y-2"},tt={class:"space-y-2"},et={class:"flex items-center gap-2 text-sm font-medium"},st={key:0,class:"card p-4"},ot={class:"grid md:grid-cols-4 gap-4 text-sm"},nt={class:"text-center"},lt={class:"text-lg font-bold text-primary"},at={class:"text-center"},rt={class:"text-lg font-bold text-primary"},it={class:"text-center"},dt={class:"text-lg font-bold text-primary"},ut={class:"text-center"},ct={class:"text-lg font-bold text-primary"},pt=B({__name:"json-pretty",setup(mt){const r=u(""),p=u(2),y=u("pretty"),c=u(!1),n=u(""),l=_(()=>{if(!r.value.trim()||n.value)return"";try{const e=JSON.parse(r.value);return y.value==="compact"?JSON.stringify(c.value?m(e):e):JSON.stringify(c.value?m(e):e,null,Number(p.value))}catch{return""}}),d=_(()=>{if(!l.value||n.value)return null;try{const e=JSON.parse(r.value);return{size:N(l.value.length),depth:f(e),keys:x(e),type:S(e)}}catch{return null}}),O=e=>{if(!e.trim()){n.value="";return}try{JSON.parse(e),n.value=""}catch(t){n.value=t.message}},m=e=>{if(e===null||typeof e!="object")return e;if(Array.isArray(e))return e.map(m);const t=Object.keys(e).sort(),o={};for(const a of t)o[a]=m(e[a]);return o},f=(e,t=1)=>{if(e===null||typeof e!="object")return t;if(Array.isArray(e))return e.length>0?Math.max(...e.map(a=>f(a,t+1))):t;const o=Object.keys(e);return o.length>0?Math.max(...o.map(a=>f(e[a],t+1))):t},x=e=>{if(e===null||typeof e!="object")return 0;if(Array.isArray(e))return e.reduce((o,a)=>o+x(a),0);const t=Object.keys(e);return t.length+t.reduce((o,a)=>o+x(e[a]),0)},S=e=>e===null?"null":Array.isArray(e)?"array":typeof e,N=e=>{const t=["B","KB","MB","GB"];if(e===0)return"0 B";const o=Math.floor(Math.log(e)/Math.log(1024));return Math.round(e/Math.pow(1024,o)*100)/100+" "+t[o]},J=()=>{r.value=""},w=()=>{r.value=JSON.stringify({name:"SHN",age:25,email:"test@example.com",skills:["JavaScript","Vue.js","TypeScript"],address:{country:"中国",city:"北京",zipCode:"100000"},projects:[{name:"工具箱项目",status:"active",contributors:5},{name:"学习笔记",status:"completed",contributors:1}]},null,2)},C=async()=>{if(l.value)try{await navigator.clipboard.writeText(l.value)}catch(e){console.error("复制失败:",e)}},M=()=>{if(!l.value)return;const e=new Blob([l.value],{type:"application/json"}),t=URL.createObjectURL(e),o=document.createElement("a");o.href=t,o.download="formatted.json",document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(t)};return z(r,O,{immediate:!0}),(e,t)=>(g(),b("div",K,[s("div",T,[s("div",L,[s("div",R,[t[4]||(t[4]=s("h2",{class:"text-xl font-semibold"},"输入JSON",-1)),s("div",E,[s("button",{onClick:J,class:"btn btn-secondary btn-sm",disabled:!r.value.trim()}," 清空 ",8,I),s("button",{onClick:w,class:"btn btn-secondary btn-sm"}," 示例数据 ")])]),v(s("textarea",{"onUpdate:modelValue":t[0]||(t[0]=o=>r.value=o),placeholder:"在此输入JSON数据...",class:"textarea min-h-[300px] resize-y font-mono text-sm"},null,512),[[A,r.value]]),n.value?(g(),b("div",q,[t[5]||(t[5]=s("p",{class:"text-sm text-destructive font-medium"},"JSON格式错误：",-1)),s("p",F,i(n.value),1)])):h("",!0)]),s("div",G,[s("div",H,[t[6]||(t[6]=s("h2",{class:"text-xl font-semibold"},"格式化结果",-1)),s("div",P,[s("button",{onClick:C,class:"btn btn-primary btn-sm",disabled:!l.value||!!n.value}," 复制结果 ",8,Q),s("button",{onClick:M,class:"btn btn-secondary btn-sm",disabled:!l.value||!!n.value}," 下载文件 ",8,W)])]),s("div",X,[s("pre",{class:U(["bg-muted p-4 rounded-md text-sm font-mono overflow-auto max-h-[300px] border",{"text-muted-foreground":!l.value}])},i(l.value||"格式化后的JSON将显示在这里..."),3)])])]),s("div",Y,[t[12]||(t[12]=s("h3",{class:"font-semibold mb-4"},"格式化选项",-1)),s("div",Z,[s("div",$,[t[8]||(t[8]=s("label",{class:"text-sm font-medium"},"缩进空格数",-1)),v(s("select",{"onUpdate:modelValue":t[1]||(t[1]=o=>p.value=o),class:"input"},t[7]||(t[7]=[s("option",{value:"2"},"2个空格",-1),s("option",{value:"4"},"4个空格",-1),s("option",{value:"8"},"8个空格",-1)]),512),[[k,p.value]])]),s("div",j,[t[10]||(t[10]=s("label",{class:"text-sm font-medium"},"输出模式",-1)),v(s("select",{"onUpdate:modelValue":t[2]||(t[2]=o=>y.value=o),class:"input"},t[9]||(t[9]=[s("option",{value:"pretty"},"美化格式",-1),s("option",{value:"compact"},"压缩格式",-1)]),512),[[k,y.value]])]),s("div",tt,[s("label",et,[v(s("input",{"onUpdate:modelValue":t[3]||(t[3]=o=>c.value=o),type:"checkbox",class:"rounded border-input"},null,512),[[D,c.value]]),t[11]||(t[11]=V(" 排序对象键名 "))])])])]),d.value&&!n.value?(g(),b("div",st,[t[17]||(t[17]=s("h3",{class:"font-semibold mb-4"},"JSON信息",-1)),s("div",ot,[s("div",nt,[s("div",lt,i(d.value.size),1),t[13]||(t[13]=s("div",{class:"text-muted-foreground"},"文件大小",-1))]),s("div",at,[s("div",rt,i(d.value.depth),1),t[14]||(t[14]=s("div",{class:"text-muted-foreground"},"最大深度",-1))]),s("div",it,[s("div",dt,i(d.value.keys),1),t[15]||(t[15]=s("div",{class:"text-muted-foreground"},"键数量",-1))]),s("div",ut,[s("div",ct,i(d.value.type),1),t[16]||(t[16]=s("div",{class:"text-muted-foreground"},"数据类型",-1))])])])):h("",!0)]))}});export{pt as default};
