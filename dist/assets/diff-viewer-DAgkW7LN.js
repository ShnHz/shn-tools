import{d as K,r as v,q as _,c,e as t,t as w,z as y,f as m,k as p,g as f,A as R,s as D,x as u,E as M,F as P,y as Q,j as Y,b}from"./vendor-BIB9HGHL.js";import{X as A,F as B,i as Z,D as ee,j as te,I as se}from"./tools-DscENNQ4.js";import{_ as oe}from"./index-DMR88uZc.js";const ne={class:"space-y-6"},le={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},ae={class:"space-y-3"},de={class:"flex items-center justify-between"},ie={class:"flex gap-2"},re=["disabled"],ue={class:"text-xs text-muted-foreground"},ce={class:"space-y-3"},me={class:"flex items-center justify-between"},fe={class:"flex gap-2"},be=["disabled"],ve={class:"text-xs text-muted-foreground"},pe={class:"card p-4"},xe={class:"flex flex-wrap items-center gap-4"},ge={class:"flex items-center gap-2"},he={class:"flex items-center gap-2"},_e={class:"flex items-center gap-2"},ye={key:0,class:"grid grid-cols-1 md:grid-cols-3 gap-4"},ke={class:"card p-4 text-center"},we={class:"text-2xl font-bold text-green-600"},Le={class:"card p-4 text-center"},Ce={class:"text-2xl font-bold text-red-600"},Te={class:"card p-4 text-center"},je={class:"text-2xl font-bold text-blue-600"},Ve={key:1,class:"space-y-4"},Ne={class:"flex items-center justify-between"},De={class:"flex gap-2"},Me={class:"card p-0 overflow-hidden"},Se={class:"diff-container max-h-[600px] overflow-auto"},Ue={class:"w-full text-sm font-mono"},Ee={key:0,class:"diff-line-number"},$e={key:1,class:"diff-line-number"},Fe={class:"diff-marker"},Re={class:"diff-content"},Ae=["innerHTML"],Be={key:2,class:"text-center py-12"},He={class:"text-muted-foreground"},Oe={class:"card p-6 bg-blue-50 dark:bg-blue-950/30 border-blue-200 dark:border-blue-800"},qe={class:"text-lg font-semibold mb-3 flex items-center gap-2"},Ie=K({__name:"diff-viewer",setup(ze){const i=v(""),r=v(""),L=v(!1),C=v(!1),g=v(!0),S=v(!1),U=v(!1),E=_(()=>i.value.split(`
`)),$=_(()=>r.value.split(`
`)),k=s=>{let e=s;return L.value&&(e=e.replace(/\s+/g," ").trim()),C.value&&(e=e.toLowerCase()),e},H=(s,e)=>{const o=s.length,a=e.length,n=Array(o+1).fill(null).map(()=>Array(a+1).fill(0));for(let l=1;l<=o;l++)for(let d=1;d<=a;d++){const x=k(s[l-1]),N=k(e[d-1]);x===N?n[l][d]=n[l-1][d-1]+1:n[l][d]=Math.max(n[l-1][d],n[l][d-1])}return n},h=_(()=>{if(!i.value&&!r.value)return[];const s=E.value,e=$.value,o=H(s,e),a=[];let n=s.length,l=e.length,d=s.length,x=e.length;for(;n>0||l>0;){const N=n>0?k(s[n-1]):"",J=l>0?k(e[l-1]):"";n>0&&l>0&&N===J?(a.unshift({type:"equal",content:j(s[n-1]),originalLine:d,modifiedLine:x}),n--,l--,d--,x--):l>0&&(n===0||o[n][l-1]>=o[n-1][l])?(a.unshift({type:"added",content:j(e[l-1]),originalLine:null,modifiedLine:x}),l--,x--):n>0&&(a.unshift({type:"deleted",content:j(s[n-1]),originalLine:d,modifiedLine:null}),n--,d--)}return a}),T=_(()=>{const s={added:0,deleted:0,modified:0};return h.value.forEach(e=>{e.type==="added"?s.added++:e.type==="deleted"&&s.deleted++}),s}),F=_(()=>i.value&&r.value&&h.value.some(s=>s.type!=="equal")),j=s=>{const e=document.createElement("div");return e.textContent=s,e.innerHTML},O=s=>{switch(s){case"added":return"bg-green-50 dark:bg-green-950/30 border-l-4 border-green-500";case"deleted":return"bg-red-50 dark:bg-red-950/30 border-l-4 border-red-500";case"modified":return"bg-blue-50 dark:bg-blue-950/30 border-l-4 border-blue-500";default:return""}},V=s=>{switch(s){case"added":return"+";case"deleted":return"-";case"modified":return"~";default:return" "}},q=()=>{i.value="",S.value=!1},I=()=>{r.value="",U.value=!1},z=()=>{i.value=`function calculateSum(a, b) {
    return a + b;
  }
  
  const numbers = [1, 2, 3, 4, 5];
  const result = numbers.reduce((sum, num) => sum + num, 0);
  
  console.log('Sum:', result);`},X=()=>{r.value=`function calculateSum(a, b, c = 0) {
    return a + b + c;
  }
  
  const numbers = [1, 2, 3, 4, 5, 6];
  const result = numbers.reduce((sum, num) => sum + num, 0);
  
  console.log('Total sum:', result);
  console.log('Average:', result / numbers.length);`},W=async()=>{const s=h.value.map(e=>`${V(e.type)} ${e.content}`).join(`
`);try{await navigator.clipboard.writeText(s)}catch(e){console.error("复制失败:",e)}},G=()=>{const s=h.value.map(n=>{const l=V(n.type);return`${g.value?`${n.originalLine||"-"}:${n.modifiedLine||"-"} `:""}${l} ${n.content}`}).join(`
`),e=new Blob([s],{type:"text/plain"}),o=URL.createObjectURL(e),a=document.createElement("a");a.href=o,a.download="text-diff.txt",document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(o)};return(s,e)=>(b(),c("div",ne,[e[22]||(e[22]=t("div",{class:"text-center"},[t("h1",{class:"text-3xl font-bold text-gradient mb-2"},"文本对比"),t("p",{class:"text-muted-foreground"},"比较两个文本的差异，高亮显示增删改内容")],-1)),t("div",le,[t("div",ae,[t("div",de,[e[7]||(e[7]=t("label",{class:"text-sm font-medium text-foreground"},"原文本",-1)),t("div",ie,[t("button",{onClick:q,class:"btn-ghost btn-sm",disabled:!i.value},[m(f(A),{class:"h-3 w-3 mr-1"}),e[5]||(e[5]=p(" 清空 "))],8,re),t("button",{onClick:z,class:"btn-outline btn-sm"},[m(f(B),{class:"h-3 w-3 mr-1"}),e[6]||(e[6]=p(" 示例 "))])])]),y(t("textarea",{"onUpdate:modelValue":e[0]||(e[0]=o=>i.value=o),placeholder:"请输入原文本...",class:D(["textarea min-h-[300px] font-mono text-sm",{"border-red-500":S.value}])},null,2),[[R,i.value]]),t("div",ue," 行数: "+u(E.value.length)+" | 字符数: "+u(i.value.length),1)]),t("div",ce,[t("div",me,[e[10]||(e[10]=t("label",{class:"text-sm font-medium text-foreground"},"新文本",-1)),t("div",fe,[t("button",{onClick:I,class:"btn-ghost btn-sm",disabled:!r.value},[m(f(A),{class:"h-3 w-3 mr-1"}),e[8]||(e[8]=p(" 清空 "))],8,be),t("button",{onClick:X,class:"btn-outline btn-sm"},[m(f(B),{class:"h-3 w-3 mr-1"}),e[9]||(e[9]=p(" 示例 "))])])]),y(t("textarea",{"onUpdate:modelValue":e[1]||(e[1]=o=>r.value=o),placeholder:"请输入新文本...",class:D(["textarea min-h-[300px] font-mono text-sm",{"border-red-500":U.value}])},null,2),[[R,r.value]]),t("div",ve," 行数: "+u($.value.length)+" | 字符数: "+u(r.value.length),1)])]),t("div",pe,[t("div",xe,[t("div",ge,[y(t("input",{id:"ignore-whitespace","onUpdate:modelValue":e[2]||(e[2]=o=>L.value=o),type:"checkbox",class:"checkbox"},null,512),[[M,L.value]]),e[11]||(e[11]=t("label",{for:"ignore-whitespace",class:"text-sm"},"忽略空白字符",-1))]),t("div",he,[y(t("input",{id:"ignore-case","onUpdate:modelValue":e[3]||(e[3]=o=>C.value=o),type:"checkbox",class:"checkbox"},null,512),[[M,C.value]]),e[12]||(e[12]=t("label",{for:"ignore-case",class:"text-sm"},"忽略大小写",-1))]),t("div",_e,[y(t("input",{id:"show-line-numbers","onUpdate:modelValue":e[4]||(e[4]=o=>g.value=o),type:"checkbox",class:"checkbox"},null,512),[[M,g.value]]),e[13]||(e[13]=t("label",{for:"show-line-numbers",class:"text-sm"},"显示行号",-1))])])]),F.value?(b(),c("div",ye,[t("div",ke,[t("div",we,u(T.value.added),1),e[14]||(e[14]=t("div",{class:"text-sm text-muted-foreground"},"新增行",-1))]),t("div",Le,[t("div",Ce,u(T.value.deleted),1),e[15]||(e[15]=t("div",{class:"text-sm text-muted-foreground"},"删除行",-1))]),t("div",Te,[t("div",je,u(T.value.modified),1),e[16]||(e[16]=t("div",{class:"text-sm text-muted-foreground"},"修改行",-1))])])):w("",!0),F.value?(b(),c("div",Ve,[t("div",Ne,[e[19]||(e[19]=t("h3",{class:"text-lg font-semibold"},"对比结果",-1)),t("div",De,[t("button",{onClick:W,class:"btn-outline btn-sm"},[m(f(Z),{class:"h-3 w-3 mr-1"}),e[17]||(e[17]=p(" 复制差异 "))]),t("button",{onClick:G,class:"btn-outline btn-sm"},[m(f(ee),{class:"h-3 w-3 mr-1"}),e[18]||(e[18]=p(" 导出 "))])])]),t("div",Me,[t("div",Se,[t("table",Ue,[t("tbody",null,[(b(!0),c(P,null,Q(h.value,(o,a)=>(b(),c("tr",{key:a,class:D(O(o.type))},[g.value?(b(),c("td",Ee,u(o.originalLine||""),1)):w("",!0),g.value?(b(),c("td",$e,u(o.modifiedLine||""),1)):w("",!0),t("td",Fe,u(V(o.type)),1),t("td",Re,[t("span",{innerHTML:o.content},null,8,Ae)])],2))),128))])])])])])):i.value||r.value?(b(),c("div",Be,[t("div",He,[m(f(te),{class:"h-12 w-12 mx-auto mb-3 opacity-50"}),t("p",null,u(i.value&&r.value?"文本内容相同":"请输入两个文本进行对比"),1)])])):w("",!0),t("div",Oe,[t("h3",qe,[m(f(se),{class:"h-5 w-5 text-blue-600"}),e[20]||(e[20]=p(" 使用说明 "))]),e[21]||(e[21]=Y('<div class="space-y-2 text-sm text-muted-foreground" data-v-14b149ee><p data-v-14b149ee>• <span class="font-medium text-green-600" data-v-14b149ee>绿色行</span>：新增内容</p><p data-v-14b149ee>• <span class="font-medium text-red-600" data-v-14b149ee>红色行</span>：删除内容</p><p data-v-14b149ee>• <span class="font-medium text-blue-600" data-v-14b149ee>蓝色行</span>：修改内容</p><p data-v-14b149ee>• 支持忽略空白字符和大小写的对比选项</p><p data-v-14b149ee>• 可以导出差异结果为文本文件</p></div>',1))])]))}}),Je=oe(Ie,[["__scopeId","data-v-14b149ee"]]);export{Je as default};
